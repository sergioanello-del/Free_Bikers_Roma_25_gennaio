<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Bikers Roma - Evento 25 Gennaio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap');

        :root {
            --harley-orange: #ff6600;
            --dark-gray: #1a1a1a;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
            scroll-behavior: smooth;
        }

        h1, h2, h3, .font-oswald {
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
        }

        .hero-gradient {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }

        .orange-border {
            border-left: 4px solid var(--harley-orange);
        }

        .btn-primary {
            background-color: var(--harley-orange);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #e65c00;
            transform: scale(1.05);
        }

        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            transition: border-color 0.3s ease;
        }

        .card:hover {
            border-color: var(--harley-orange);
        }

        .map-placeholder {
            background: #222;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .gemini-gradient {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1b0d 100%);
            border: 1px solid #ff660044;
        }

        /* Loading animation */
        .dot-flashing {
            position: relative;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: var(--harley-orange);
            color: var(--harley-orange);
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: .5s;
        }
        .dot-flashing::before, .dot-flashing::after {
            content: '';
            display: inline-block;
            position: absolute;
            top: 0;
        }
        .dot-flashing::before {
            left: -15px;
            width: 100px; /* Adjusted */
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: var(--harley-orange);
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 0s;
        }
        .dot-flashing::after {
            left: 15px;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: var(--harley-orange);
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 1s;
        }
        @keyframes dot-flashing {
            0% { background-color: var(--harley-orange); }
            50%, 100% { background-color: #ff660033; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <nav class="fixed w-full z-50 bg-black/80 backdrop-blur-md border-b border-orange-600/30">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-motorcycle text-orange-500 text-2xl"></i>
                <span class="text-xl font-bold tracking-tighter">FREE BIKERS <span class="text-orange-500">ROMA</span></span>
            </div>
            <div class="hidden md:flex gap-8 text-sm font-medium">
                <a href="#evento" class="hover:text-orange-500 transition">EVENTO</a>
                <a href="#itinerari" class="hover:text-orange-500 transition font-bold text-orange-400">SCOPRI PERCORSI ✨</a>
                <a href="#iscrizione" class="hover:text-orange-500 transition">ISCRIVITI</a>
                <a href="#contatti" class="hover:text-orange-500 transition">CONTATTI</a>
            </div>
            <a href="#iscrizione" class="btn-primary px-6 py-2 rounded-full text-sm font-bold">PARTECIPA</a>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero-gradient min-h-screen flex items-center justify-center text-center px-4 pt-20">
        <div class="max-w-4xl">
            <div class="mb-6 inline-block border-2 border-orange-500 px-4 py-1 text-orange-500 font-bold tracking-widest text-sm mb-4">
                SABATO 25 GENNAIO
            </div>
            <h1 class="text-6xl md:text-8xl font-bold mb-4 tracking-tighter">WINTER <span class="text-orange-500">RIDE</span> 2025</h1>
            
            <div class="grid grid-cols-4 gap-2 md:gap-4 mb-10 max-w-lg mx-auto" id="countdown">
                <div class="bg-black/60 p-3 rounded border border-gray-800">
                    <span class="block text-3xl font-bold" id="days">00</span>
                    <span class="text-xs text-gray-400">GIORNI</span>
                </div>
                <div class="bg-black/60 p-3 rounded border border-gray-800">
                    <span class="block text-3xl font-bold" id="hours">00</span>
                    <span class="text-xs text-gray-400">ORE</span>
                </div>
                <div class="bg-black/60 p-3 rounded border border-gray-800">
                    <span class="block text-3xl font-bold" id="minutes">00</span>
                    <span class="text-xs text-gray-400">MIN</span>
                </div>
                <div class="bg-black/60 p-3 rounded border border-gray-800">
                    <span class="block text-3xl font-bold" id="seconds">00</span>
                    <span class="text-xs text-gray-400">SEC</span>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#itinerari" class="btn-primary px-10 py-4 rounded-md text-lg font-bold">PIANIFICA VIAGGIO ✨</a>
                <a href="#mappa" class="bg-white/10 hover:bg-white/20 backdrop-blur-md px-10 py-4 rounded-md text-lg font-bold border border-white/20 transition">VEDI MAPPA</a>
            </div>
        </div>
    </section>

    <!-- Gemini Route Planner Section -->
    <section id="itinerari" class="py-20 px-4 bg-[#0a0a0a]">
        <div class="max-w-5xl mx-auto">
            <div class="gemini-gradient p-8 md:p-12 rounded-3xl shadow-2xl">
                <div class="flex flex-col md:flex-row gap-8 items-start">
                    <div class="md:w-1/2">
                        <h2 class="text-4xl font-bold mb-4 leading-tight">PIANIFICA IL TUO ARRIVO CON AI ✨</h2>
                        <p class="text-gray-400 mb-6">Inserisci da dove parti: la nostra IA Gemini ti suggerirà il percorso più panoramico per raggiungerci a Roma, evitando le noiose autostrade e puntando sulle curve più belle.</p>
                        
                        <div class="space-y-4">
                            <input type="text" id="userLocation" placeholder="Da dove parti? (es: Firenze, Napoli, Terni...)" 
                                   class="w-full bg-black/50 border border-orange-500/30 p-4 rounded-xl focus:border-orange-500 outline-none text-white">
                            <button onclick="generateRoute()" id="btnGenerate" class="w-full bg-orange-600 hover:bg-orange-500 py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> GENERA ITINERARIO ✨
                            </button>
                        </div>
                    </div>
                    
                    <div class="md:w-1/2 w-full min-h-[300px] bg-black/40 rounded-2xl border border-gray-800 p-6 relative overflow-hidden">
                        <div id="loadingRoute" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/60 z-10">
                            <div class="dot-flashing mb-4"></div>
                            <p class="text-orange-500 animate-pulse font-bold">Gemini sta tracciando le curve...</p>
                        </div>
                        <div id="routeResult" class="text-gray-300 italic text-sm leading-relaxed prose prose-invert max-w-none">
                            <div class="flex flex-col items-center justify-center h-full py-12 opacity-30">
                                <i class="fa-solid fa-map-location-dot text-6xl mb-4"></i>
                                <p>Il tuo itinerario apparirà qui</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gear Advisor Section -->
    <section id="advisor" class="py-20 px-4 border-t border-gray-900">
        <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-12 items-center">
             <div class="order-2 md:order-1 min-h-[250px] bg-orange-950/20 rounded-2xl p-6 border border-orange-500/20" id="gearAdvisorResult">
                <p class="text-gray-400 italic">Clicca il pulsante per ricevere consigli sull'equipaggiamento invernale per il 25 Gennaio...</p>
            </div>
            <div class="order-1 md:order-2">
                <h3 class="text-3xl font-bold mb-4">NON FARTI SORPRENDERE DAL FREDDO ✨</h3>
                <p class="text-gray-400 mb-6">Il 25 Gennaio può essere rigido. Chiedi a Gemini consigli personalizzati su come preparare la tua moto e quale abbigliamento tecnico indossare per goderti il Winter Ride.</p>
                <button onclick="getGearAdvice()" id="btnGear" class="bg-white text-black hover:bg-orange-500 hover:text-white px-8 py-3 rounded-full font-bold transition flex items-center gap-2">
                    <i class="fa-solid fa-shield-halved"></i> CONSIGLI EQUIPAGGIAMENTO ✨
                </button>
            </div>
        </div>
    </section>

    <!-- Program -->
    <section id="programma" class="py-20 px-4 bg-[#0d0d0d]">
        <div class="max-w-7xl mx-auto text-center mb-16">
            <h2 class="text-4xl font-bold mb-4 italic">PROGRAMMA DELLA GIORNATA</h2>
            <div class="h-1 w-20 bg-orange-500 mx-auto"></div>
        </div>
        <div class="max-w-5xl mx-auto grid md:grid-cols-3 gap-8">
            <div class="card p-8 rounded-xl text-center">
                <i class="fa-solid fa-mug-hot text-3xl text-orange-500 mb-4"></i>
                <h3 class="text-xl font-bold mb-3">10:00 - Accoglienza</h3>
                <p class="text-gray-400 text-sm">Caffè e gadget di benvenuto.</p>
            </div>
            <div class="card p-8 rounded-xl text-center">
                <i class="fa-solid fa-route text-3xl text-orange-500 mb-4"></i>
                <h3 class="text-xl font-bold mb-3">11:30 - Partenza</h3>
                <p class="text-gray-400 text-sm">Tour panoramico intorno a Roma.</p>
            </div>
            <div class="card p-8 rounded-xl text-center">
                <i class="fa-solid fa-utensils text-3xl text-orange-500 mb-4"></i>
                <h3 class="text-xl font-bold mb-3">13:30 - Pranzo Biker</h3>
                <p class="text-gray-400 text-sm">Buffet e musica dal vivo.</p>
            </div>
        </div>
    </section>

    <!-- Mappa -->
    <section id="mappa" class="py-20 px-4">
        <div class="max-w-5xl mx-auto h-[400px] rounded-2xl overflow-hidden border border-gray-800 map-placeholder flex items-center justify-center relative">
            <div class="text-center z-10 bg-black/60 p-6 backdrop-blur-sm rounded-lg border border-orange-500/30">
                <i class="fa-solid fa-location-dot text-orange-500 text-4xl mb-4"></i>
                <h3 class="text-xl font-bold">RITROVO: PIAZZALE ROMA</h3>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contatti" class="bg-black border-t border-gray-900 pt-16 pb-8 px-4">
        <div class="max-w-7xl mx-auto text-center">
             <div class="flex items-center justify-center gap-2 mb-6">
                <i class="fa-solid fa-motorcycle text-orange-500 text-3xl"></i>
                <span class="text-2xl font-bold tracking-tighter italic">FREE BIKERS ROMA</span>
            </div>
            <p class="text-gray-500 mb-8">&copy; 2025 Free Bikers Roma. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const apiKey = ""; // Gestita dall'ambiente

        async function callGemini(prompt, systemInstruction) {
            let retries = 5;
            let delay = 1000;
            
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error('API Error');
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (e) {
                    if (i === retries - 1) throw e;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        }

        async function generateRoute() {
            const location = document.getElementById('userLocation').value;
            if (!location) {
                alert("Inserisci un punto di partenza!");
                return;
            }

            const btn = document.getElementById('btnGenerate');
            const loader = document.getElementById('loadingRoute');
            const resultDiv = document.getElementById('routeResult');

            btn.disabled = true;
            loader.classList.remove('hidden');
            resultDiv.innerHTML = "";

            try {
                const systemPrompt = "Sei un esperto road-captain di moto del club Free Bikers Roma. Fornisci itinerari panoramici e divertenti per motociclisti, evitando autostrade. Usa un tono energico e biker. Formatta in Markdown semplice.";
                const prompt = `Pianifica un itinerario panoramico in moto da ${location} a Roma (Piazzale Roma) per il raduno del 25 gennaio. Indica tappe interessanti, strade con curve e consigli di guida per quel tragitto specifico.`;
                
                const response = await callGemini(prompt, systemPrompt);
                resultDiv.innerHTML = `<div class="animate-fadeIn">${response.replace(/\n/g, '<br>')}</div>`;
            } catch (error) {
                resultDiv.innerHTML = "<p class='text-red-500'>Spiacenti, il road-captain è fuori zona. Riprova più tardi.</p>";
            } finally {
                btn.disabled = false;
                loader.classList.add('hidden');
            }
        }

        async function getGearAdvice() {
            const btn = document.getElementById('btnGear');
            const resultDiv = document.getElementById('gearAdvisorResult');

            btn.disabled = true;
            resultDiv.innerHTML = "<div class='flex gap-2 justify-center py-4'><div class='dot-flashing'></div></div>";

            try {
                const systemPrompt = "Sei un veterano motociclista esperto di raduni invernali. Consiglia equipaggiamento tecnico e controlli moto per un evento il 25 gennaio a Roma.";
                const prompt = "Che abbigliamento consigli per un raduno a Roma a fine gennaio? Quali controlli devo fare alla moto prima di partire per il freddo? Sii breve e pratico.";
                
                const response = await callGemini(prompt, systemPrompt);
                resultDiv.innerHTML = `<div class='text-sm text-gray-300 leading-relaxed animate-fadeIn'>${response.replace(/\n/g, '<br>')}</div>`;
            } catch (error) {
                resultDiv.innerHTML = "<p class='text-red-500'>Connessione ai box interrotta.</p>";
            } finally {
                btn.disabled = false;
            }
        }

        // Countdown Logic
        function updateCountdown() {
            const eventDate = new Date('January 25, 2025 10:00:00').getTime();
            const now = new Date().getTime();
            const distance = eventDate - now;
            const countdownElement = document.getElementById('countdown');
            if (!countdownElement) return;
            if (distance < 0) {
                countdownElement.innerHTML = "<p class='text-orange-500 font-bold col-span-4 text-2xl uppercase tracking-widest'>BENVENUTI AL RADUNO!</p>";
                return;
            }
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById('days').innerText = String(days).padStart(2, '0');
            document.getElementById('hours').innerText = String(hours).padStart(2, '0');
            document.getElementById('minutes').innerText = String(minutes).padStart(2, '0');
            document.getElementById('seconds').innerText = String(seconds).padStart(2, '0');
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    e.preventDefault();
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>